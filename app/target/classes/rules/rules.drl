package rules;

import demo.model.Arrangement;
import java.util.Date

rule "Aran탑man je popularan"
when
$arragment : Arrangement(ratings.size() >=20 || ratings.size()>=10 , state==true)
then
modify($arragment){setPopular(true)}
end

rule "NoviAran탑man"
when
    $arrangement: Arrangement(dateAdded >= (new Date() - 30*24*60*60*1000)) // Proveravamo da li je datum dodavanja u poslednjih 30 dana
then
    $arrangement.setState(true); // Postavljamo polje "Nov" na true za novi aran탑man
end

rule "OdrediStatusAran탑mana"
when
    $arrangement: Arrangement($averageRating: calculateAverageRating())
then
    if ($averageRating >= 4) {
        $arrangement.setGrade(Arrangement.Grade.GOOD);
    } else if ($averageRating <= 2.5) {
        $arrangement.setGrade(Arrangement.Grade.BAD);
    } else {
        $arrangement.setGrade(Arrangement.Grade.NEUTRAL);
    }
end